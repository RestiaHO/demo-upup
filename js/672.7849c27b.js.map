{"version":3,"file":"js/672.7849c27b.js","mappings":"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","sources":["webpack://toutiao-m/./src/views/home/home.vue?45f7","webpack://toutiao-m/./src/views/home/components/article-list.vue?44ef","webpack://toutiao-m/./src/components/article-item/article-item.vue?b1f0","webpack://toutiao-m/src/components/article-item/article-item.vue","webpack://toutiao-m/./src/components/article-item/article-item.vue?a087","webpack://toutiao-m/./src/components/article-item/article-item.vue","webpack://toutiao-m/src/views/home/components/article-list.vue","webpack://toutiao-m/./src/views/home/components/article-list.vue?e2a7","webpack://toutiao-m/./src/views/home/components/article-list.vue","webpack://toutiao-m/./src/views/home/components/channel-edit.vue?1c0e","webpack://toutiao-m/src/views/home/components/channel-edit.vue","webpack://toutiao-m/./src/views/home/components/channel-edit.vue?a5be","webpack://toutiao-m/./src/views/home/components/channel-edit.vue","webpack://toutiao-m/src/views/home/home.vue","webpack://toutiao-m/./src/views/home/home.vue?055e","webpack://toutiao-m/./src/views/home/home.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"home-container\"},[_c('van-nav-bar',{staticClass:\"page-nav-bar\",attrs:{\"fixed\":\"\"}},[_c('van-button',{staticClass:\"search-btn\",attrs:{\"slot\":\"title\",\"type\":\"info\",\"size\":\"small\",\"round\":\"\",\"icon\":\"search\",\"to\":\"/search\"},slot:\"title\"},[_vm._v(\"搜索\")])],1),_c('van-tabs',{staticClass:\"channel-tabs\",attrs:{\"animated\":\"\",\"swipeable\":\"\"},model:{value:(_vm.active),callback:function ($$v) {_vm.active=$$v},expression:\"active\"}},[_vm._l((_vm.channels),function(item){return _c('van-tab',{key:item.id,attrs:{\"title\":item.name}},[_c('article-list',{attrs:{\"channel\":item}})],1)}),_c('div',{staticClass:\"placeholder\",attrs:{\"slot\":\"nav-right\"},slot:\"nav-right\"}),_c('div',{staticClass:\"hamburger-btn\",attrs:{\"slot\":\"nav-right\"},on:{\"click\":function($event){_vm.isChennelEditShow = true}},slot:\"nav-right\"},[_c('i',{staticClass:\"toutiao toutiao-gengduo\"})])],2),_c('van-popup',{staticClass:\"edit-channel-popup\",style:({ height: '100%' }),attrs:{\"position\":\"bottom\",\"closeable\":\"\",\"close-icon-position\":\"top-left\"},model:{value:(_vm.isChennelEditShow),callback:function ($$v) {_vm.isChennelEditShow=$$v},expression:\"isChennelEditShow\"}},[_c('channal-edit',{attrs:{\"myChannels\":_vm.channels,\"active\":_vm.active},on:{\"update-active\":_vm.onUpdateActive}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"article-list\"},[_c('van-pull-refresh',{attrs:{\"success-text\":_vm.refreshSuccessText,\"success-duration\":1500},on:{\"refresh\":_vm.onRefresh},model:{value:(_vm.isreFreshLoading),callback:function ($$v) {_vm.isreFreshLoading=$$v},expression:\"isreFreshLoading\"}},[_c('van-list',{attrs:{\"finished\":_vm.finished,\"error\":_vm.error,\"error-text\":\"请求失败，点击重新加载\",\"finished-text\":\"没有更多了\"},on:{\"update:error\":function($event){_vm.error=$event},\"load\":_vm.onLoad},model:{value:(_vm.loading),callback:function ($$v) {_vm.loading=$$v},expression:\"loading\"}},_vm._l((_vm.list),function(item,index){return _c('article-item',{key:index,attrs:{\"article\":item}})}),1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('van-cell',{staticClass:\"article-item\",attrs:{\"to\":(\"/article/\" + (_vm.article.art_id))},scopedSlots:_vm._u([{key:\"title\",fn:function(){return [_c('div',{staticClass:\"title van-multi-ellipsis--l2\"},[_vm._v(_vm._s(_vm.article.title))])]},proxy:true},{key:\"label\",fn:function(){return [(_vm.article.cover.type === 3)?_c('div',{staticClass:\"cover-wrap\"},_vm._l((_vm.article.cover.images),function(img,index){return _c('div',{key:index,staticClass:\"cover-item\"},[_c('van-image',{staticClass:\"right-color\",attrs:{\"fit\":\"cover\",\"src\":img}})],1)}),0):_vm._e(),_c('div',{staticClass:\"label-info-wrap\"},[_c('span',[_vm._v(_vm._s(_vm.article.aut_name))]),_c('span',[_vm._v(_vm._s(_vm.article.comm_count)+\"评论\")]),_c('span',[_vm._v(_vm._s(_vm._f(\"relativeTime\")(_vm.article.pubdate)))])])]},proxy:true},(_vm.article.cover.type === 1)?{key:\"default\",fn:function(){return [_c('van-image',{staticClass:\"right-color\",attrs:{\"fit\":\"cover\",\"src\":_vm.article.cover.images[0]}})]},proxy:true}:null],null,true)})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <van-cell class=\"article-item\" :to=\"`/article/${article.art_id}`\">\r\n    <!-- 标题信息 -->\r\n    <template #title>\r\n      <!-- 设置vant中的内置class让标题两行后省略 -->\r\n      <div class=\"title van-multi-ellipsis--l2\">{{ article.title }}</div>\r\n    </template>\r\n\r\n    <!-- 底部信息 -->\r\n    <template #label>\r\n      <!-- 根据type数量来判断有没有封面 0是没有 1是有一个 3是有3个 -->\r\n      <div v-if=\"article.cover.type === 3\" class=\"cover-wrap\">\r\n        <div class=\"cover-item\" v-for=\"(img, index) in article.cover.images\" :key=\"index\">\r\n          <van-image class=\"right-color\" fit=\"cover\" :src=\"img\" />\r\n        </div>\r\n      </div>\r\n      <!-- 设置底部文字容器 -->\r\n      <div class=\"label-info-wrap\">\r\n        <span>{{ article.aut_name }}</span>\r\n        <span>{{ article.comm_count }}评论</span>\r\n        <span>{{ article.pubdate | relativeTime }}</span>\r\n      </div>\r\n    </template>\r\n\r\n    <!-- 右侧图片信息 -->\r\n    <!-- 根据type数量来判断有没有封面 0是没有 1是有一个 3是有3个 -->\r\n    <template #default v-if=\"article.cover.type === 1\">\r\n      <van-image class=\"right-color\" fit=\"cover\" :src=\"article.cover.images[0]\" />\r\n    </template>\r\n  </van-cell>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'ArticleItem',\r\n  props: {\r\n    article: {\r\n      type: Object,\r\n      default: () => ({})\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.article-item {\r\n  .title {\r\n    font-size: 32px;\r\n    color: #3a3a3a;\r\n  }\r\n\r\n  /* 固定右侧盒子 */\r\n  .van-cell__value {\r\n    flex: unset;\r\n    width: 232px;\r\n    height: 146px;\r\n    padding-left: 25px;\r\n  }\r\n\r\n  /* 设置图片样式 */\r\n  .right-color {\r\n    width: 100%;\r\n    height: 146px;\r\n  }\r\n\r\n  /* 底部文字样式 */\r\n  .label-info-wrap span {\r\n    font-size: 22px;\r\n    color: #b4b4b4;\r\n    margin-right: 25px;\r\n  }\r\n\r\n  /* 多图展示样式 */\r\n  .cover-wrap {\r\n    display: flex;\r\n    padding: 30px 0;\r\n\r\n    .cover-item {\r\n      /* 每张图均分宽度 */\r\n      flex: 1;\r\n      height: 146px;\r\n\r\n      &:not(:last-child) {\r\n        padding-right: 4px;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./article-item.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./article-item.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./article-item.vue?vue&type=template&id=11be470e&scoped=true&\"\nimport script from \"./article-item.vue?vue&type=script&lang=js&\"\nexport * from \"./article-item.vue?vue&type=script&lang=js&\"\nimport style0 from \"./article-item.vue?vue&type=style&index=0&id=11be470e&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"11be470e\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"article-list\">\r\n    <van-pull-refresh\r\n      v-model=\"isreFreshLoading\"\r\n      :success-text=\"refreshSuccessText\"\r\n      :success-duration=\"1500\"\r\n      @refresh=\"onRefresh\"\r\n    >\r\n      <van-list\r\n        v-model=\"loading\"\r\n        :finished=\"finished\"\r\n        :error.sync=\"error\"\r\n        error-text=\"请求失败，点击重新加载\"\r\n        finished-text=\"没有更多了\"\r\n        @load=\"onLoad\"\r\n      >\r\n        <!-- <van-cell v-for=\"(item, index) in list\" :key=\"index\" :title=\"item.title\"/> -->\r\n        <article-item\r\n          v-for=\"(item, index) in list\"\r\n          :key=\"index\"\r\n          :article=\"item\"\r\n        >\r\n        </article-item>\r\n      </van-list>\r\n    </van-pull-refresh>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getArticlesAPI } from '../../../api/index.js'\r\nimport ArticleItem from '../../../components/article-item/article-item.vue'\r\nexport default {\r\n  name: 'ArticleList',\r\n  components: {\r\n    ArticleItem\r\n  },\r\n  props: {\r\n    channel: {\r\n      type: Object,\r\n      default: () => ({})\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      list: [], // 存储列表数据的数组\r\n      loading: false, // 控制加载中 loading 状态\r\n      finished: false, // 控制数据加载结束的状态\r\n      timestamp: null, // 请求下一页数据的时间戳\r\n      error: false, // 控制列表加载失败的提示状态\r\n      isreFreshLoading: false, // 控制下拉刷新的 loading 状态\r\n      refreshSuccessText: '刷新成功' // 下拉刷新成功提示文本\r\n    }\r\n  },\r\n  methods: {\r\n    // 初始化或滚动到底部的时候会触发调用 onLoad\r\n    async onLoad () {\r\n      // 1. 请求获取数据\r\n      try {\r\n        const { data: res } = await getArticlesAPI({\r\n          channel_id: this.channel.id, // 频道 id\r\n          timestamp: this.timestamp || Date.now() // 时间戳，请求新的推荐数据传当前的时间戳，请求历史推荐传指定的时间戳\r\n        })\r\n        console.log(res)\r\n        // 2. 把数据添加到 list 数组中\r\n        this.list.push(...res.data.results)\r\n\r\n        // 3. 设置本次加载中 loading 状态结束\r\n        this.loading = false\r\n        // 4. 判断数据是否加载结束\r\n        if (res.data.results.length) {\r\n          // 更新获取下一页数据的时间戳\r\n          this.timestamp = res.data.pre_timestamp\r\n        } else {\r\n          // 没有数据了，设置加载状态结束，不再触发上拉加载更多了\r\n          this.finished = true\r\n        }\r\n      } catch (err) {\r\n        // 展示错误提示状态\r\n        this.error = true\r\n\r\n        // 请求失败了，loading 也需要关闭\r\n        this.loading = false\r\n        console.log(err)\r\n      }\r\n    },\r\n\r\n    // 当下拉刷新的时候会触发调用该函数\r\n    async onRefresh () {\r\n      try {\r\n        // 1. 请求获取数据\r\n        const { data: res } = await getArticlesAPI({\r\n          channel_id: this.channel.id, // 频道ID\r\n          timestamp: Date.now() // 下拉刷线，每次请求获取最新数据，所以传递当前最新时间戳\r\n        })\r\n\r\n        // 2. 将数据追加到列表的顶部\r\n        // this.list = res.data.results\r\n        this.list.unshift(...res.data.results)\r\n\r\n        // 3. 关闭下拉刷新的 loading 状态\r\n        this.isreFreshLoading = false\r\n\r\n        // 更新下拉刷新成功提示的文本\r\n        this.refreshSuccessText = `刷新成功，更新了${res.data.results.length}条数据`\r\n      } catch (error) {\r\n        // 关闭下拉并且提示失败\r\n        this.refreshSuccessText = '刷新失败'\r\n        this.isreFreshLoading = false\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.article-list {\r\n  // 百分比单位是相对于父元素的，这里高度其实为0\r\n  // height: 100%;\r\n  // overflow-y: auto;\r\n  // 视口（在移动端是布局视口）单位：vw 和 vh，不受父元素影响\r\n  // 1vw = 视口宽度的百分之一\r\n  // 1vh = 视口高度的百分之一\r\n  /*\r\n    兼容性：\r\n    1. 在pc端已经兼容到IE9\r\n    2. 移动端 IOS8以上， Androld 4.4 以上\r\n    3. 微信x5内核\r\n    已经2202年了，基本上就没有这种兼容性问题\r\n  */\r\n  height: 79vh;\r\n  overflow-y: auto;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./article-list.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./article-list.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./article-list.vue?vue&type=template&id=641f931d&scoped=true&\"\nimport script from \"./article-list.vue?vue&type=script&lang=js&\"\nexport * from \"./article-list.vue?vue&type=script&lang=js&\"\nimport style0 from \"./article-list.vue?vue&type=style&index=0&id=641f931d&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"641f931d\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"channel-edit\"},[_c('van-cell',{attrs:{\"border\":false}},[_c('div',{staticClass:\"title-text\",attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(\"我的频道\")]),_c('van-button',{staticClass:\"edit-btn\",attrs:{\"size\":\"mini\",\"round\":\"\",\"type\":\"danger\",\"plain\":\"\"},on:{\"click\":function($event){_vm.isEditShow = !_vm.isEditShow}}},[_vm._v(\" \"+_vm._s(_vm.isEditShow ? '完成': '编辑')+\" \")])],1),_c('van-grid',{staticClass:\"my-grid\",attrs:{\"gutter\":10}},_vm._l((_vm.myChannels),function(channelItem,index){return _c('van-grid-item',{key:index,staticClass:\"channel-item\",on:{\"click\":function($event){return _vm.onMyChannelClick(channelItem, index)}}},[_c('span',{staticClass:\"text\",class:{active: _vm.active === index},attrs:{\"slot\":\"text\"},slot:\"text\"},[_vm._v(_vm._s(channelItem.name))]),_c('van-icon',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isEditShow && index!==0),expression:\"isEditShow && index!==0\"}],attrs:{\"slot\":\"icon\",\"name\":\"close\"},slot:\"icon\"})],1)}),1),_c('van-cell',{attrs:{\"border\":false}},[_c('div',{staticClass:\"title-text\",attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(\"频道推荐\")])]),_c('van-grid',{staticClass:\"recommend-grid\",attrs:{\"gutter\":10}},_vm._l((_vm.recommendChannels),function(channel){return _c('van-grid-item',{key:channel.id,staticClass:\"channel-item\",attrs:{\"text\":channel.name,\"icon\":\"plus\"},on:{\"click\":function($event){return _vm.onAddChannel(channel)}}})}),1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"channel-edit\">\r\n    <van-cell :border=\"false\">\r\n      <div slot=\"title\" class=\"title-text\">我的频道</div>\r\n      <van-button\r\n        class=\"edit-btn\"\r\n        size=\"mini\"\r\n        round\r\n        type=\"danger\"\r\n        plain\r\n        @click=\"isEditShow = !isEditShow\"\r\n      >\r\n        {{ isEditShow ? '完成': '编辑' }}\r\n      </van-button>\r\n    </van-cell>\r\n\r\n    <van-grid class=\"my-grid\" :gutter=\"10\">\r\n      <van-grid-item\r\n        class=\"channel-item\"\r\n        v-for=\"(channelItem, index) in myChannels\"\r\n        :key=\"index\"\r\n        @click=\"onMyChannelClick(channelItem, index)\"\r\n      >\r\n        <span class=\"text\" :class=\"{active: active === index}\" slot=\"text\">{{ channelItem.name }}</span>\r\n        <van-icon v-show=\"isEditShow && index!==0\" slot=\"icon\" name=\"close\"></van-icon>\r\n      </van-grid-item>\r\n    </van-grid>\r\n\r\n    <!-- 频道推荐 -->\r\n    <van-cell :border=\"false\">\r\n      <div slot=\"title\" class=\"title-text\">频道推荐</div>\r\n    </van-cell>\r\n\r\n    <van-grid class=\"recommend-grid\" :gutter=\"10\">\r\n      <van-grid-item\r\n        class=\"channel-item\"\r\n        v-for=\"channel in recommendChannels\"\r\n        :key=\"channel.id\"\r\n        :text=\"channel.name\"\r\n        icon=\"plus\"\r\n        @click=\"onAddChannel(channel)\"\r\n      />\r\n    </van-grid>\r\n    <!-- /频道推荐 -->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getAllChannelsAPI, addUserChannelAPI, deleteUserChannelAPI } from '../../../api/index.js'\r\nimport { mapState } from 'vuex'\r\nimport { setItem } from '../../../utils/storage.js'\r\nexport default {\r\n  name: 'ChannelEdit',\r\n  props: {\r\n    myChannels: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    active: {\r\n      type: Number,\r\n      default: 0\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      myChannelsClone: this.myChannels,\r\n      allChannels: [], // 所有频道\r\n      isEditShow: false // 控制编辑状态\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState(['user']),\r\n\r\n    // 计算属性会观测内部依赖数据的变化\r\n    // 如果依赖的数据发生变化，则计算属性会重新执行\r\n    recommendChannels () {\r\n      // 数组的 filter 方法：遍历数组，把符合条件的元素存储到新数组中并返回\r\n      const list = this.allChannels.filter(channel => {\r\n        // 数组的 find 方法：遍历数组，把符合条件的第1个元素返回\r\n        return !this.myChannels.find(myChannel => {\r\n          return myChannel.id === channel.id\r\n        })\r\n      })\r\n      // const list = [...this.$_.differenceBy(this.allChannels, this.myChannels, 'id')]\r\n      return list\r\n    }\r\n  },\r\n  created () {\r\n    // 获取所有频道\r\n    this.loadAllChannels()\r\n  },\r\n  methods: {\r\n    async loadAllChannels () {\r\n      try {\r\n        const { data: res } = await getAllChannelsAPI()\r\n        this.allChannels = res.data.channels\r\n        console.log(res.data)\r\n      } catch (err) {\r\n        this.$toast('获取频道列表数据失败')\r\n      }\r\n    },\r\n\r\n    // 添加频道\r\n    async onAddChannel (channel) {\r\n      // 不可以直接修改父组件传递过来的参数，所以拷贝一份在data中\r\n      this.myChannelsClone.push(channel)\r\n\r\n      // 数据持久化处理\r\n      // 未登录，把数据储存到本地\r\n      // 一登录, 把数据请求接口放到线上\r\n      if (this.user) {\r\n        // 已登录\r\n        try {\r\n          // 已登录，数据存储到线上\r\n          await addUserChannelAPI({\r\n            id: channel.id, // 频道 id\r\n            seq: this.myChannels.length // 频道的 序号\r\n          })\r\n          this.$toast('添加成功')\r\n        } catch (err) {\r\n          this.$toast('保存失败')\r\n        }\r\n      } else {\r\n        // 未登陆 把数据存储到本地\r\n        setItem('TOUTIAO_CHANNELS', this.myChannels)\r\n      }\r\n    },\r\n\r\n    // 频道功能方法\r\n    onMyChannelClick (channel, index) {\r\n      if (this.isEditShow) {\r\n        // 1. 编辑状态删除频道\r\n        // 判断是否为推荐\r\n        if (index === 0) return\r\n        this.myChannelsClone.splice(index, 1)\r\n\r\n        // 2. 让激活频道的索引 - 1\r\n        if (index <= this.active) {\r\n          this.$emit('update-active', this.active - 1, true)\r\n        }\r\n\r\n        // 删除数据持久化\r\n        this.deleteChannel(channel)\r\n      } else {\r\n        // 2. 非编辑状态切换频道( 通过isEditShow判断)\r\n        this.$emit('update-active', index)\r\n      }\r\n    },\r\n\r\n    // 删除数据持久化\r\n    async deleteChannel (channel) {\r\n      try {\r\n        if (this.user) {\r\n          // 已登录，将数据存储到线上\r\n          await deleteUserChannelAPI(channel.id)\r\n        } else {\r\n          // 未登录，将数据存储到本地\r\n          setItem('TOUTIAO_CHANNELS', this.myChannels)\r\n        }\r\n      } catch (err) {\r\n        console.log(err)\r\n        this.$toast('删除频道失败，请稍后重试')\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.channel-edit {\r\n  .title-text {\r\n    height: 100%;\r\n    line-height: 58px;\r\n    font-size: 32px;\r\n    color: #333333;\r\n  }\r\n\r\n  .edit-btn {\r\n    line-height: 48px;\r\n    width: 104px;\r\n    height: 48px;\r\n    font-size: 26px;\r\n    color: #f85959;\r\n    border: 1px solid #f85959;\r\n  }\r\n\r\n  .channel-item {\r\n    height: 86px;\r\n    width: 160px;\r\n\r\n    /* 设置按钮背景 */\r\n    /deep/ .van-grid-item__content {\r\n      background-color: #f5f5f6;\r\n\r\n      /* 设置按钮字体样式 */\r\n      .van-grid-item__text, .text {\r\n        color: #222;\r\n        font-size: 28px;\r\n        margin-top: 0;\r\n      }\r\n      /* 设置高亮 */\r\n      .active {\r\n        color: red;\r\n      }\r\n      /* 去掉父容器相对定位 */\r\n      .van-grid-item__icon-wrapper {\r\n        position: unset;\r\n      }\r\n    }\r\n  }\r\n\r\n  /deep/ .recommend-grid {\r\n    .van-grid-item__content {\r\n      white-space: nowrap;\r\n      flex-direction: row;\r\n\r\n      /* 设置按钮字体样式 */\r\n\r\n      .van-icon-plus {\r\n        font-size: 28px;\r\n        margin-right: 6px;\r\n      }\r\n    }\r\n  }\r\n\r\n  /deep/ .my-grid {\r\n    .van-grid-item__content {\r\n      .van-icon-close {\r\n        position: absolute;\r\n        right: -10px;\r\n        top: -10px;\r\n        font-size: 30px;\r\n        color: #cacaca;\r\n        z-index: 2;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./channel-edit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./channel-edit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./channel-edit.vue?vue&type=template&id=759bb78a&scoped=true&\"\nimport script from \"./channel-edit.vue?vue&type=script&lang=js&\"\nexport * from \"./channel-edit.vue?vue&type=script&lang=js&\"\nimport style0 from \"./channel-edit.vue?vue&type=style&index=0&id=759bb78a&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"759bb78a\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"home-container\">\n    <!-- 导航栏 -->\n    <van-nav-bar class=\"page-nav-bar\" fixed>\n      <van-button\n        class=\"search-btn\"\n        slot=\"title\"\n        type=\"info\"\n        size=\"small\"\n        round\n        icon=\"search\"\n        to=\"/search\"\n      >搜索</van-button>\n    </van-nav-bar>\n    <!-- /导航栏 -->\n\n    <!-- 频道列表 -->\n    <!--\n      通过v-model绑定当前激活标签对应的索引值，默认情况下启用第一个标签\n      通过animated属性可以开启切换标签内容时的转场动画\n      通过swipeable属性可以开启滑动切换标签页\n      通过swipe-threshold属性设置最低滑动标签数\n    -->\n    <van-tabs class=\"channel-tabs\" v-model=\"active\" animated swipeable>\n      <van-tab v-for=\"item in channels\" :key=\"item.id\" :title=\"item.name\">\n        <!-- 文章列表 -->\n        <article-list :channel=\"item\"></article-list>\n        <!-- 文章列表 -->\n      </van-tab>\n      <div slot=\"nav-right\" class=\"placeholder\">\n      </div>\n      <div slot=\"nav-right\" class=\"hamburger-btn\" @click=\"isChennelEditShow = true\">\n        <i class=\"toutiao toutiao-gengduo\"></i>\n      </div>\n    </van-tabs>\n\n    <!-- 频道编辑 -->\n    <van-popup\n      class=\"edit-channel-popup\"\n      v-model=\"isChennelEditShow\"\n      position=\"bottom\"\n      :style=\"{ height: '100%' }\"\n      closeable\n      close-icon-position=\"top-left\"\n    >\n      <channal-edit @update-active=\"onUpdateActive\" :myChannels=\"channels\" :active=\"active\"></channal-edit>\n    </van-popup>\n    <!-- /频道编辑 -->\n  </div>\n</template>\n\n<script>\n// 1. 导入 获取频道列表的方法\nimport { getUserChannelsAPI } from '../../api/index.js'\nimport ArticleList from './components/article-list.vue'\nimport ChannalEdit from './components/channel-edit.vue'\nimport { mapState } from 'vuex'\nimport { getItem } from '../../utils/storage.js'\nexport default {\n  name: 'HomeIndex',\n  components: {\n    ArticleList,\n    ChannalEdit\n  },\n  props: {},\n  data () {\n    return {\n      active: 0,\n      channels: [], // 频道列表\n      isChennelEditShow: false // 控制编辑频道弹出层的显示状态\n    }\n  },\n\n  computed: {\n    ...mapState(['user'])\n  },\n\n  created () {\n    // 调用获取频道列表\n    this.loadChannels()\n  },\n\n  methods: {\n    async loadChannels () {\n      try {\n        let channles = []\n        const localChannels = getItem('TOUTIAO_CHANNELS')\n        if (this.user || !localChannels) {\n          // 登录 或者 本地没有存储 获取后端数据\n          const { data: res } = await getUserChannelsAPI()\n          this.channels = res.data.channels\n          return false\n        } else {\n          // 未登录并且本地没有数据\n          channles = localChannels\n        }\n        this.channels = channles\n      } catch (err) {\n        this.$toast('获取频道列表数据失败')\n      }\n    },\n\n    // 子组件切换频道\n    onUpdateActive (index, isShow = false) {\n      this.active = index\n      this.isChennelEditShow = isShow\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"less\">\n.home-container {\n  padding-top: 174px;\n  padding-bottom: 100px;\n\n  // 深度设置组件样式\n  /deep/.van-nav-bar__title {\n    max-width: unset;\n  }\n\n  .search-btn {\n    width: 555px;\n    height: 64px;\n    background-color: #5babfb;\n    border: none;\n    font-size: 28px;\n\n    .van-icon {\n      font-size: 32px;\n    }\n  }\n\n  /deep/ .channel-tabs {\n    .van-tabs__wrap {\n      position: fixed;\n      top: 92px;\n      z-index: 1;\n      left: 0;\n      right: 0;\n      height: 82px;\n    }\n\n    .van-tab {\n      border-right: 1px solid #edeff3;\n      min-width: 200px;\n      font-size: 30px;\n      color: #777777;\n    }\n\n    .van-tab--active {\n      color: #333333;\n    }\n\n    .van-tabs__nav {\n      padding-bottom: 0;\n    }\n\n    .van-tabs__line {\n      bottom: 8px;\n      width: 31px !important;\n      height: 6px;\n      background-color: #3296fa;\n    }\n\n    .placeholder {\n      flex-shrink: 0;\n      /* flex布局需要用这个属性不让它参与flex计算 */\n      width: 66px;\n      height: 82px;\n    }\n\n    .hamburger-btn {\n      position: fixed;\n      right: 0;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      width: 66px;\n      height: 82px;\n      background-color: #fff;\n      background-color: rgba(255, 255, 255, 0.902);\n\n      i.toutiao {\n        font-size: 33px;\n      }\n\n      &:before {\n        content: \"\";\n        position: absolute;\n        left: 0;\n        width: 2px;\n        height: 58px;\n        background-image: url(../../assets/gradient-gray-line.png);\n        background-size: contain;\n      }\n    }\n  }\n  .edit-channel-popup {\n    padding-top: 100px;\n    box-sizing: border-box;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./home.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./home.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./home.vue?vue&type=template&id=75e2ec2f&scoped=true&\"\nimport script from \"./home.vue?vue&type=script&lang=js&\"\nexport * from \"./home.vue?vue&type=script&lang=js&\"\nimport style0 from \"./home.vue?vue&type=style&index=0&id=75e2ec2f&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"75e2ec2f\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","slot","_v","model","value","callback","$$v","active","expression","_l","item","key","id","name","on","$event","isChennelEditShow","style","height","channels","onUpdateActive","staticRenderFns","refreshSuccessText","onRefresh","isreFreshLoading","finished","error","onLoad","loading","index","article","scopedSlots","_u","fn","_s","title","proxy","cover","type","img","_e","aut_name","comm_count","_f","pubdate","images","props","default","component","components","ArticleItem","channel","data","list","timestamp","methods","channel_id","console","isEditShow","channelItem","onMyChannelClick","class","directives","rawName","onAddChannel","myChannels","myChannelsClone","allChannels","computed","recommendChannels","created","seq","setItem","ArticleList","ChannalEdit","channles"],"sourceRoot":""}